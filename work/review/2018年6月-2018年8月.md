
2. 封装response消息



1. 合体使用药瓶


2. 封装response消息  

```
public TSendCmd GenerateResponseMsg<T>(T proto, uint iMsgId, uint protoId = 0) where T : Google.Protobuf.IMessage
{
    TSendCmd cmd;
    string route = ColorLandProto.NetTypes.GetResponseKey(typeof(T));
    SendNetMsg msgReturn = gameNets.SendNetMsg.Alloc(route, iMsgId, proto);
    cmd.sendContext = PackPackage(protoId, msgReturn.Buffer, msgReturn.BufferLength);
    msgReturn.Dispose();
    return cmd;
}
```


3. 和NPC完成任务
```
WalkPositionTask
IsFinished
```
4. 队长召集和队员离队
```
OnTempLeaveTeamRequest
OnBackTeamRequst
OnBackTeamByLeaderRequest
OnTeamMemberIsAcceptBackTeamRequest
```
5. 邮件标记、领取奖励一键领取
```
OnReadMailRequest
OnAwardMailRequest
```
6. 修改机器人协议
```

```
7. 任务上下线的脚本保护
```
OnlineCheckTask
macro_OfflineLua
```
8. 幸运值脚本、组合技能
```
CheckLuck()
在人的身上的，再加一个时间戳，目的是保证每天随机一次，且不是在同一时间

skNode.m_dicSkillTeam.TryGetValue("sky", out skillId);
当有了新的技能ID，就需要使用新的技能数据了，所以要更新skNode
skNode = skill.skillManage.m_me.GetSkillData(skillId);
 
```
9. 延迟执行某脚本
10. 职业大招优化
11. 添加释放伤害体偏移位置 
12. 修改技能朝向
13. 蓄力技能伤害体偏移位置
